{
  "title": "Neurodivergent Transition Mastery",
  "version": "1.0",
  "description": "A routine designed to help ADHD and autistic individuals navigate difficult transitions between tasks, environments, and mental states using habit stacking and executive function supports.",
  "setupSteps": [
    {
      "type": "parameter_request",
      "question": "What's your most challenging daily transition? (e.g., starting work, leaving the house, ending hyperfocus, bedtime)",
      "parameterKey": "challengingTransition",
      "parameterType": "STRING"
    },
    {
      "type": "parameter_request",
      "question": "What's a small physical action you could do to signal 'transition time'? (e.g., clap 3 times, stretch arms, take 3 deep breaths)",
      "parameterKey": "transitionSignal",
      "parameterType": "STRING"
    },
    {
      "type": "parameter_request",
      "question": "How many minutes do you typically need to mentally switch gears? (Be honest - neurodivergent brains need more time!)",
      "parameterKey": "switchingTime",
      "parameterType": "INT"
    },
    {
      "type": "parameter_request",
      "question": "What helps you feel grounded when overwhelmed? (music, fidget tool, specific phrase, breathing pattern)",
      "parameterKey": "groundingTool",
      "parameterType": "STRING"
    }
  ],
  "phases": [
    {
      "title": "Basic Transition Training",
      "steps": [
        {
          "type": "message",
          "message": "üîÑ Transition practice time! Let's work on your ${challengingTransition} challenge.",
          "timeOfDay": "09:00",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "‚ö° Transition signal practice: Do your ${transitionSignal} - this is training your brain to recognize switching time",
          "timeOfDay": "09:02",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "‚è∞ Set a timer for ${switchingTime} minutes - this is your 'mental switching buffer' (no judgment, just respect your brain's needs)",
          "timeOfDay": "09:04",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üß† During your switching time: Use your ${groundingTool} and let your brain slowly shift gears",
          "timeOfDay": "09:06",
          "expectedDurationMinutes": "${switchingTime}",
          "expectConfirmation": true
        },
        {
          "type": "message",
          "message": "‚úÖ Transition complete! You've just practiced honoring your neurodivergent brain's needs.",
          "timeOfDay": "09:06+PT${switchingTime}M",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        }
      ],
      "schedule": "DAILY"
    },
    {
      "title": "Habit-Stacked Transitions",
      "condition": {
        "type": "AFTER_PHASE_COMPLETIONS",
        "phaseTitle": "Basic Transition Training",
        "times": 7
      },
      "steps": [
        {
          "type": "message",
          "message": "üîÑ Daily transition training (your brain is learning!)",
          "timeOfDay": "09:00",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "‚ö° ${transitionSignal} - your brain's switching cue",
          "timeOfDay": "09:02",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "‚è∞ Timer set for ${switchingTime} minutes of switching time",
          "timeOfDay": "09:04",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üß† ${groundingTool} + mental gear shifting",
          "timeOfDay": "09:06",
          "expectedDurationMinutes": "${switchingTime}",
          "expectConfirmation": true
        },
        {
          "type": "message",
          "message": "‚úÖ Transition complete!",
          "timeOfDay": "09:06+PT${switchingTime}M",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "message",
          "message": "üåÜ Evening transition practice: Let's work on ending your day mindfully",
          "timeOfDay": "18:00",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "‚ö° Evening ${transitionSignal} - signaling 'work mode' is ending",
          "timeOfDay": "18:02",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üìù Brain dump: Write down 3 things you accomplished today and 3 things for tomorrow (external working memory)",
          "timeOfDay": "18:04",
          "expectedDurationMinutes": 5,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üß† ${groundingTool} to shift into 'personal time' mode",
          "timeOfDay": "18:10",
          "expectedDurationMinutes": "${switchingTime}",
          "expectConfirmation": true
        }
      ],
      "schedule": "DAILY"
    },
    {
      "title": "Complete Transition Support System",
      "condition": {
        "type": "AFTER_PHASE_COMPLETIONS",
        "phaseTitle": "Habit-Stacked Transitions",
        "times": 10
      },
      "steps": [
        {
          "type": "message",
          "message": "üåÖ Morning transition prep: Setting up your neurodivergent brain for successful switching all day",
          "timeOfDay": "08:30",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üìã Review your day: Identify 2-3 major transitions you'll need to make today",
          "timeOfDay": "08:32",
          "expectedDurationMinutes": 3,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "‚è∞ Pre-schedule transition buffers: Add ${switchingTime} minutes before each major transition",
          "timeOfDay": "08:36",
          "expectedDurationMinutes": 2,
          "expectConfirmation": true
        },
        {
          "type": "message",
          "message": "üîÑ Midday transition practice",
          "timeOfDay": "12:00",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "‚ö° Midday ${transitionSignal} - resetting your focus",
          "timeOfDay": "12:02",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üß† ${groundingTool} regulation break",
          "timeOfDay": "12:04",
          "expectedDurationMinutes": "${switchingTime}",
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üéØ Afternoon priority check: What's your one main focus for the rest of the day?",
          "timeOfDay": "12:04+PT${switchingTime}M+PT2M",
          "expectedDurationMinutes": 2,
          "expectConfirmation": true
        },
        {
          "type": "message",
          "message": "üåÜ Evening wind-down transition",
          "timeOfDay": "18:00",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "‚ö° End-of-day ${transitionSignal}",
          "timeOfDay": "18:02",
          "expectedDurationMinutes": 1,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üìù Day completion ritual: 3 accomplishments + 3 tomorrow priorities",
          "timeOfDay": "18:04",
          "expectedDurationMinutes": 5,
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üß† ${groundingTool} to shift into rest mode",
          "timeOfDay": "18:10",
          "expectedDurationMinutes": "${switchingTime}",
          "expectConfirmation": true
        },
        {
          "type": "action",
          "message": "üéâ Celebrate successful transitions: You honored your neurodivergent brain's needs today!",
          "timeOfDay": "18:10+PT${switchingTime}M+PT2M",
          "expectedDurationMinutes": 2,
          "expectConfirmation": true
        }
      ],
      "schedule": "DAILY"
    }
  ],
  "triggers": [
    {
      "condition": {
        "type": "AFTER_PHASE_COMPLETIONS",
        "phaseTitle": "Basic Transition Training",
        "times": 3
      },
      "effect": {
        "type": "SEND_MESSAGE",
        "message": "üß† Neuroscience fact: Your brain is building new neural pathways for smoother transitions! ADHD and autistic brains need extra time to switch - you're not broken, you're different."
      }
    },
    {
      "condition": {
        "type": "AFTER_PHASE_COMPLETIONS",
        "phaseTitle": "Basic Transition Training",
        "times": 7
      },
      "effect": {
        "type": "SEND_MESSAGE",
        "message": "üöÄ Amazing! Your transition signal is becoming automatic. Ready to add habit stacking and practice multiple daily transitions?"
      }
    },
    {
      "condition": {
        "type": "AFTER_PHASE_COMPLETIONS",
        "phaseTitle": "Habit-Stacked Transitions",
        "times": 10
      },
      "effect": {
        "type": "SEND_MESSAGE",
        "message": "üéâ You've mastered basic transition skills! Ready for a complete support system that helps you navigate ALL your daily transitions?"
      }
    },
    {
      "condition": {
        "type": "AFTER_PHASE_COMPLETIONS",
        "phaseTitle": "Complete Transition Support System",
        "times": 14
      },
      "effect": {
        "type": "SEND_MESSAGE",
        "message": "üèÜ Two weeks of transition mastery! You're becoming an expert at honoring your neurodivergent brain's switching needs. This is a major life skill!"
      }
    },
    {
      "condition": {
        "type": "AFTER_DURATION",
        "reference": "PHASE_ENTERED",
        "duration": "PT48H"
      },
      "effect": {
        "type": "SEND_MESSAGE",
        "message": "üí° Transition Tip: Every neurodivergent person has different switching needs. What matters is finding YOUR rhythm and honoring it, not conforming to neurotypical expectations."
      }
    },
    {
      "condition": {
        "type": "AFTER_PHASE_COMPLETIONS",
        "phaseTitle": "Complete Transition Support System",
        "times": 7
      },
      "effect": {
        "type": "CREATE_TASK",
        "taskDescription": "Practice your transition skills with your most challenging daily switch: ${challengingTransition}. Remember to use your ${transitionSignal} and ${groundingTool}!",
        "parameterKey": "challengeTransitionPractice",
        "expiryDate": "2025-12-31T23:59:59Z"
      }
    }
  ]
} 